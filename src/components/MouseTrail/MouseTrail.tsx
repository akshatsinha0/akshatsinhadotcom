import React,{useEffect,useRef,useState} from 'react'
import './MouseTrail.css'
const MouseTrail:React.FC=()=>{const trailRef=useRef<HTMLDivElement>(null);const cursorRef=useRef<HTMLDivElement>(null);const[enabled,setEnabled]=useState(false);useEffect(()=>{const fine=window.matchMedia&&window.matchMedia('(pointer:fine)').matches;const reduce=window.matchMedia&&window.matchMedia('(prefers-reduced-motion: reduce)').matches;if(!fine||reduce)return;setEnabled(true);let mx=0,my=0,tx=0,ty=0,raf=0;const onMove=(e:MouseEvent)=>{mx=e.clientX;my=e.clientY};const loop=()=>{tx+=(mx-tx)*0.2;ty+=(my-ty)*0.2;if(cursorRef.current)cursorRef.current.style.transform=`translate3d(${mx}px,${my}px,0)`;if(trailRef.current)trailRef.current.style.transform=`translate3d(${tx}px,${ty}px,0)`;raf=requestAnimationFrame(loop)};window.addEventListener('mousemove',onMove,{passive:true});raf=requestAnimationFrame(loop);return()=>{window.removeEventListener('mousemove',onMove);cancelAnimationFrame(raf)}},[]);if(!enabled)return null;return(<><div ref={cursorRef} className="custom-cursor"/><div ref={trailRef} className="mouse-trail"/></>)}
export default MouseTrail

